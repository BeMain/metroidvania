[gd_scene load_steps=10 format=3 uid="uid://bww2xlda4yq52"]

[ext_resource type="Texture2D" uid="uid://b61d4et3xr2jv" path="res://textures/White_Circle.svg" id="4_1u77r"]
[ext_resource type="Script" path="res://Ripples.gd" id="4_sm2rk"]
[ext_resource type="Shader" path="res://ripple_canvas.gdshader" id="4_xicoq"]
[ext_resource type="Shader" path="res://ripple_simulation.gdshader" id="5_6rx6j"]

[sub_resource type="CircleShape2D" id="CircleShape2D_bcpiq"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_slv3u"]
shader = ExtResource("4_xicoq")
shader_parameter/amplitude = null

[sub_resource type="ShaderMaterial" id="ShaderMaterial_40tma"]
shader = ExtResource("5_6rx6j")
shader_parameter/a = null
shader_parameter/amplitude = null
shader_parameter/grid_points = null

[sub_resource type="ViewportTexture" id="ViewportTexture_lrtsj"]
viewport_path = NodePath("Ripples/SimulationViewport")

[sub_resource type="ViewportTexture" id="ViewportTexture_uwrvm"]
viewport_path = NodePath("Ripples/CollisionViewport")

[node name="World" type="Node2D"]

[node name="StaticBody2D" type="StaticBody2D" parent="."]
visibility_layer = 3
position = Vector2(100, 100)
scale = Vector2(10, 10)

[node name="WhiteCircle" type="Sprite2D" parent="StaticBody2D"]
scale = Vector2(0.033, 0.033)
texture = ExtResource("4_1u77r")

[node name="CollisionShape2D" type="CollisionShape2D" parent="StaticBody2D"]
shape = SubResource("CircleShape2D_bcpiq")
metadata/_edit_lock_ = true

[node name="Ripples" type="ColorRect" parent="."]
material = SubResource("ShaderMaterial_slv3u")
script = ExtResource("4_sm2rk")

[node name="SimulationViewport" type="SubViewport" parent="Ripples"]

[node name="ColorRect" type="ColorRect" parent="Ripples/SimulationViewport"]
material = SubResource("ShaderMaterial_40tma")
offset_right = 512.0
offset_bottom = 512.0

[node name="CollisionViewport" type="SubViewport" parent="Ripples"]

[node name="UI" type="CanvasLayer" parent="."]

[node name="SimulationVisualization" type="TextureRect" parent="UI"]
offset_left = 17.0
offset_top = 56.0
offset_right = 529.0
offset_bottom = 568.0
texture = SubResource("ViewportTexture_lrtsj")

[node name="CollisionVisualization" type="TextureRect" parent="UI"]
offset_left = 611.0
offset_top = 56.0
offset_right = 1123.0
offset_bottom = 568.0
texture = SubResource("ViewportTexture_uwrvm")
